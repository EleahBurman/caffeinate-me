<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/cafes/show.css" />
<%- include('../partials/nav') %>

<main>
  <div class="border">
    <h1 class="animate__animated animate__lightSpeedInLeft">☕️<%= cafe.name %>☕️</h1>
    <h2><%= cafe.location %></h2>
    <div class="meryl">
      <img id="meryl" src="/images/merylcoffee.gif" alt="Even Meryl Streep Needs Coffee">
    </div>
    <h3 id="reviews">Reviews</h3>
    <div class="row reviewborder">
      <% cafe.reviews.forEach(review => { %>
        <% if (review.reviewer) { %>
          <div class="column">
            <li>☕️Name: <%= review.reviewer.name %></li>
            <li>☕️Favorite Coffee: <%= review.favoriteCoffee %></li>
            <li>☕️Least Favorite Coffee: <%= review.leastCoffee %></li>
            <li>☕️Milk Preference: <%= review.milk %></li>
            <li>☕️Price of Latte: $<%= review.priceLatte %></li>
          </div>
        <% } %>
        <% if(review.reviewer.equals(user?.profile._id)) { %>
          <div class="column">
            <div class="marginbottom">
              <form action="/cafes/<%= cafe._id %>/reviews/<%= review._id %>/edit" method="GET">
                <button class="button" id="edit-review">EDIT REVIEW</button>
              </form>
            </div>
            <form action="/cafes/<%= cafe._id %>/reviews/<%=review._id%>?_method=DELETE" method="POST">
              <button class="button">X</button>
            </form>
          </div>
        <% } %>
      <% }) %>
    </div>
    <h3 id="addreview">Add Review</h3>
    <div class="review">
      <form id="add-review-form" action="/cafes/<%= cafe._id%>/reviews" method="POST">
        <label for="favoriteCoffee">Favorite Coffee:</label>
        <input type="text" class="textbox" name="favoriteCoffee" class="rowtwo" id="favoriteCoffee"></input>
        <label for="leastCoffee">Least Favorite Coffee:</label>
        <input type="text" class="textbox" name="leastCoffee" id="leastCoffee" class="rowtwo"></input>
        <label for="milk-select">Milk:</label>
        <select name="milk" id="milk-select" class="rowtwo">
          <option value="Whole">Whole</option>
          <option value="Oat">Oat</option>
          <option value="Skim">Skim</option>
          <option value="Soy">Soy</option>
          <option value="Almond">Almond</option>
        </select>
        <label for="priceLatte">Price of Latte: $</label>
        <input type="number" class="textbox" name="priceLatte" id="priceLatte" class="rowtwo"></input>
        <button class="button" type="submit">Add Review</button>
      </form>
    </div>
  </div>
</main>
<%- include('../partials/footer') %>

